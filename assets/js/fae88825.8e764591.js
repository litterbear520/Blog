"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[4272],{8103(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>t,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"\u9879\u76ee/xiaozhi-minimax-server/index","title":"xiaozhi-minimax-server","description":"\u8fd9\u662f\u5173\u4e8e xiaozhi-minimax-server \u9879\u76ee\u7684\u7b14\u8bb0\u548c\u6587\u6863\u3002","source":"@site/docs/\u9879\u76ee/xiaozhi-minimax-server/index.md","sourceDirName":"\u9879\u76ee/xiaozhi-minimax-server","slug":"/\u9879\u76ee/xiaozhi-minimax-server/","permalink":"/Blog/docs/\u9879\u76ee/xiaozhi-minimax-server/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u9879\u76ee/xiaozhi-minimax-server/index.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"\u9879\u76ee","permalink":"/Blog/docs/\u9879\u76ee/"},"next":{"title":"\u65af\u5766\u798fAI\u5c0f\u9547","permalink":"/Blog/docs/\u9879\u76ee/\u65af\u5766\u798fAI\u5c0f\u9547/"}}');var r=i(4848),l=i(8453);const a={sidebar_position:1},c="xiaozhi-minimax-server",d={},o=[{value:"\u5feb\u901f\u542f\u52a8",id:"\u5feb\u901f\u542f\u52a8",level:2},{value:"1.\u514b\u9686\u9879\u76ee",id:"1\u514b\u9686\u9879\u76ee",level:3},{value:"2.\u8fdb\u5165\u90e8\u7f72\u76ee\u5f55",id:"2\u8fdb\u5165\u90e8\u7f72\u76ee\u5f55",level:3},{value:"3.\u521b\u5efa\u5fc5\u8981\u7684\u76ee\u5f55\u7ed3\u6784",id:"3\u521b\u5efa\u5fc5\u8981\u7684\u76ee\u5f55\u7ed3\u6784",level:3},{value:"4.\u4e0b\u8f7d\u6a21\u578b\u6587\u4ef6",id:"4\u4e0b\u8f7d\u6a21\u578b\u6587\u4ef6",level:3},{value:"5.\u521b\u5efa\u914d\u7f6e\u6587\u4ef6",id:"5\u521b\u5efa\u914d\u7f6e\u6587\u4ef6",level:3},{value:"6.\u542f\u52a8\u670d\u52a1",id:"6\u542f\u52a8\u670d\u52a1",level:3},{value:"7.\u67e5\u770b\u72b6\u6001\u65e5\u5fd7",id:"7\u67e5\u770b\u72b6\u6001\u65e5\u5fd7",level:3},{value:"8.\u8bbf\u95ee\u667a\u63a7\u53f0\u5e76\u6ce8\u518c\u7ba1\u7406\u5458",id:"8\u8bbf\u95ee\u667a\u63a7\u53f0\u5e76\u6ce8\u518c\u7ba1\u7406\u5458",level:3},{value:"9.\u914d\u7f6e<code>server.secret</code>",id:"9\u914d\u7f6eserversecret",level:3},{value:"10.\u914d\u7f6e AI \u6a21\u578b\u5bc6\u94a5",id:"10\u914d\u7f6e-ai-\u6a21\u578b\u5bc6\u94a5",level:3},{value:"11.\u914d\u7f6e\u670d\u52a1\u5668\u5730\u5740",id:"11\u914d\u7f6e\u670d\u52a1\u5668\u5730\u5740",level:3},{value:"12.\u8bbf\u95ee\u6d4b\u8bd5\u7f51\u9875",id:"12\u8bbf\u95ee\u6d4b\u8bd5\u7f51\u9875",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"xiaozhi-minimax-server",children:"xiaozhi-minimax-server"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u662f\u5173\u4e8e xiaozhi-minimax-server \u9879\u76ee\u7684\u7b14\u8bb0\u548c\u6587\u6863\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u5feb\u901f\u542f\u52a8",children:"\u5feb\u901f\u542f\u52a8"}),"\n",(0,r.jsx)(n.h3,{id:"1\u514b\u9686\u9879\u76ee",children:"1.\u514b\u9686\u9879\u76ee"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/litterbear520/xiaozhi-minimax-esp32-server.git\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2\u8fdb\u5165\u90e8\u7f72\u76ee\u5f55",children:"2.\u8fdb\u5165\u90e8\u7f72\u76ee\u5f55"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd main/xiaozhi-server\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3\u521b\u5efa\u5fc5\u8981\u7684\u76ee\u5f55\u7ed3\u6784",children:"3.\u521b\u5efa\u5fc5\u8981\u7684\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir data\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4\u4e0b\u8f7d\u6a21\u578b\u6587\u4ef6",children:"4.\u4e0b\u8f7d\u6a21\u578b\u6587\u4ef6"}),"\n",(0,r.jsxs)(n.p,{children:["\u4ece",(0,r.jsx)(n.a,{href:"https://modelscope.cn/models/iic/SenseVoiceSmall/resolve/master/model.pt",children:"\u963f\u91cc\u9b54\u642d"}),"\u4e0b\u8f7d",(0,r.jsx)(n.code,{children:"model.pt"}),"\u6587\u4ef6\u5e76\u653e\u5230",(0,r.jsx)(n.code,{children:"models/SenseVoiceSmall/"}),"\u76ee\u5f55\uff1a"]}),"\n",(0,r.jsx)(n.h3,{id:"5\u521b\u5efa\u914d\u7f6e\u6587\u4ef6",children:"5.\u521b\u5efa\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u610f\u8fd9\u91cc\u7684\u914d\u7f6e\u6587\u4ef6\u6309\u7167\u6ce8\u91ca\u4fee\u6539"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"copy config_from_api.yaml data\\.config.yaml\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"server:\n  ip: 0.0.0.0\n  port: 8000\n  # http\u670d\u52a1\u7684\u7aef\u53e3\uff0c\u7528\u4e8e\u89c6\u89c9\u5206\u6790\u63a5\u53e3\n  http_port: 8003\n  # \u89c6\u89c9\u5206\u6790\u63a5\u53e3\u5730\u5740\uff08Docker\u90e8\u7f72\u4f7f\u7528\u5c40\u57df\u7f51\u5730\u5740\uff09\n  vision_explain: http://\u4f60\u7684IP\u5730\u5740:8003/mcp/vision/explain\n  # \u8ba4\u8bc1\u914d\u7f6e\n  auth:\n    # \u662f\u5426\u542f\u7528\u8ba4\u8bc1\n    enabled: false\n\nmanager-api:\n  # Docker\u90e8\u7f72\u4f7f\u7528\u5bb9\u5668\u5185\u90e8\u5730\u5740\n  url: http://xiaozhi-esp32-server-web:8002/xiaozhi\n  # \u4ece\u667a\u63a7\u53f0\u53c2\u6570\u7ba1\u7406\u4e2d\u590d\u5236\u7684 server.secret \u503c\n  secret: b1dcea83-e6fa-45f2-9152-38984c8417a1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"6\u542f\u52a8\u670d\u52a1",children:"6.\u542f\u52a8\u670d\u52a1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose -f docker-compose_all.yml up -d\n"})}),"\n",(0,r.jsx)(n.h3,{id:"7\u67e5\u770b\u72b6\u6001\u65e5\u5fd7",children:"7.\u67e5\u770b\u72b6\u6001\u65e5\u5fd7"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b\u542f\u52a8\u72b6\u6001\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose -f docker-compose_all.yml ps\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b\u5b9e\u65f6\u65e5\u5fd7\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker logs -f xiaozhi-esp32-server\n"})}),"\n",(0,r.jsx)(n.h3,{id:"8\u8bbf\u95ee\u667a\u63a7\u53f0\u5e76\u6ce8\u518c\u7ba1\u7406\u5458",children:"8.\u8bbf\u95ee\u667a\u63a7\u53f0\u5e76\u6ce8\u518c\u7ba1\u7406\u5458"}),"\n",(0,r.jsxs)(n.p,{children:["\u6d4f\u89c8\u5668\u6253\u5f00\uff1a",(0,r.jsx)(n.a,{href:"http://localhost:8002",children:"http://localhost:8002"})]}),"\n",(0,r.jsx)(n.admonition,{title:"\u91cd\u8981",type:"info",children:(0,r.jsx)(n.p,{children:"\u7b2c\u4e00\u4e2a\u6ce8\u518c\u7684\u7528\u6237\u81ea\u52a8\u6210\u4e3a\u8d85\u7ea7\u7ba1\u7406\u5458\uff01"})}),"\n",(0,r.jsxs)(n.h3,{id:"9\u914d\u7f6eserversecret",children:["9.\u914d\u7f6e",(0,r.jsx)(n.code,{children:"server.secret"})]}),"\n",(0,r.jsxs)(n.p,{children:["\u767b\u5f55\u667a\u63a7\u53f0\u540e\uff0c\u8fdb\u5165\u53c2\u6570\u7ba1\u7406,\u627e\u5230\u53c2\u6570\u7f16\u7801\u4e3a",(0,r.jsx)(n.code,{children:"server.secret"}),"\u7684\u8bb0\u5f55\u590d\u5236\u5b83\u7684\u53c2\u6570\u503c\n\u7f16\u8f91",(0,r.jsx)(n.code,{children:".config.yaml"}),"\uff0c\u586b\u5165",(0,r.jsx)(n.code,{children:"secret"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"manager-api:\n  url: http://xiaozhi-esp32-server-web:8002/xiaozhi\n  secret:   # \u7c98\u8d34\u4f60\u590d\u5236\u7684\u503c\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4fdd\u5b58\u540e\u91cd\u542f\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker restart xiaozhi-esp32-server\n"})}),"\n",(0,r.jsx)(n.h3,{id:"10\u914d\u7f6e-ai-\u6a21\u578b\u5bc6\u94a5",children:"10.\u914d\u7f6e AI \u6a21\u578b\u5bc6\u94a5"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u667a\u63a7\u53f0\u4e2d\uff1a\n\u8fdb\u5165\u6a21\u578b\u914d\u7f6e \u2192 \u5927\u8bed\u8a00\u6a21\u578b"}),"\n",(0,r.jsxs)(n.p,{children:["\u627e\u5230\u667a\u8c31AI\uff0c\u70b9\u51fb\u4fee\u6539\uff0c\u586b\u5165API\u5bc6\u94a5\uff0c\u4ece",(0,r.jsx)(n.a,{href:"https://bigmodel.cn/usercenter/proj-mgmt/apikeys",children:"\u667a\u8c31\u5f00\u653e\u5e73\u53f0"}),"\u83b7\u53d6"]}),"\n",(0,r.jsx)(n.h3,{id:"11\u914d\u7f6e\u670d\u52a1\u5668\u5730\u5740",children:"11.\u914d\u7f6e\u670d\u52a1\u5668\u5730\u5740"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u667a\u63a7\u53f0\u53c2\u6570\u7ba1\u7406\u4e2d\u914d\u7f6e\uff1a"}),"\n",(0,r.jsxs)(n.p,{children:["server.websocket\uff1a",(0,r.jsx)(n.code,{children:"ws://\u4f60\u7684\u5c40\u57df\u7f51IP:8000/xiaozhi/v1/"})]}),"\n",(0,r.jsxs)(n.p,{children:["server.ota\uff1a",(0,r.jsx)(n.code,{children:"http://\u4f60\u7684\u5c40\u57df\u7f51IP:8002/xiaozhi/ota/"})]}),"\n",(0,r.jsx)(n.p,{children:"\u83b7\u53d6ip\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# window\nipconfig\n\n# Linux/Mac\nifconfig\n\n# \u6216\nip addr show\n"})}),"\n",(0,r.jsx)(n.h3,{id:"12\u8bbf\u95ee\u6d4b\u8bd5\u7f51\u9875",children:"12.\u8bbf\u95ee\u6d4b\u8bd5\u7f51\u9875"}),"\n",(0,r.jsxs)(n.p,{children:["\u5148\u8fdb\u5165\u8fd9\u4e2a\u76ee\u5f55: ",(0,r.jsx)(n.code,{children:"main\\xiaozhi-server\\test"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"python -m http.server 8080\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6d4b\u8bd5\u9875\u9762"}),"\uff1a",(0,r.jsx)(n.a,{href:"http://%E4%BD%A0%E7%9A%84IP%E5%9C%B0%E5%9D%80:8080/test_page.html",children:"http://\u4f60\u7684IP\u5730\u5740:8080/test_page.html"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7ba1\u7406\u540e\u53f0"}),"\uff1a",(0,r.jsx)(n.a,{href:"http://%E4%BD%A0%E7%9A%84IP%E5%9C%B0%E5%9D%80:8002",children:"http://\u4f60\u7684IP\u5730\u5740:8002"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ota"}),"\uff1a",(0,r.jsx)(n.a,{href:"http://%E4%BD%A0%E7%9A%84IP%E5%9C%B0%E5%9D%80:8002/xiaozhi/ota/",children:"http://\u4f60\u7684IP\u5730\u5740:8002/xiaozhi/ota/"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"WebSocket\u8fde\u63a5\u5730\u5740"}),"\uff1aws://\u4f60\u7684IP\u5730\u5740:8000/xiaozhi/v1/"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u662f\u672c\u5730\u7684\u7528",(0,r.jsx)(n.code,{children:"localhost"}),"\u6216\u8005",(0,r.jsx)(n.code,{children:"127.0.0.1"}),"\u66ff\u6362IP\u5730\u5740\u5373\u53ef\u3002"]})]})}function t(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>c});var s=i(6540);const r={},l=s.createContext(r);function a(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);