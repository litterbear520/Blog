"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[9034],{5620:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"\u667a\u80fd\u4f53\u6846\u67b6/\u6838\u5fc3/Agent\u62bd\u8c61\u57fa\u7c7b","title":"Agent\u62bd\u8c61\u57fa\u7c7b","description":"Agent \u7c7b\u662f\u6574\u4e2a\u6846\u67b6\u7684\u9876\u5c42\u62bd\u8c61\u3002\u5b83\u5b9a\u4e49\u4e86\u4e00\u4e2a\u667a\u80fd\u4f53\u5e94\u8be5\u5177\u5907\u7684\u901a\u7528\u884c\u4e3a\u548c\u5c5e\u6027\uff0c\u4f46\u5e76\u4e0d\u5173\u5fc3\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002\u6211\u4eec\u901a\u8fc7 Python \u7684 abc (Abstract Base Classes) \u6a21\u5757\u6765\u5b9e\u73b0\u5b83\uff0c\u8fd9\u5f3a\u5236\u6240\u6709\u5177\u4f53\u7684\u667a\u80fd\u4f53\u5b9e\u73b0\uff08SimpleAgent, ReActAgent \u7b49\uff09\u90fd\u5fc5\u987b\u9075\u5faa\u540c\u4e00\u4e2a\\"\u63a5\u53e3\\"\u3002","source":"@site/docs/\u667a\u80fd\u4f53\u6846\u67b6/\u6838\u5fc3/Agent\u62bd\u8c61\u57fa\u7c7b.md","sourceDirName":"\u667a\u80fd\u4f53\u6846\u67b6/\u6838\u5fc3","slug":"/\u667a\u80fd\u4f53\u6846\u67b6/\u6838\u5fc3/Agent\u62bd\u8c61\u57fa\u7c7b","permalink":"/Blog/docs/\u667a\u80fd\u4f53\u6846\u67b6/\u6838\u5fc3/Agent\u62bd\u8c61\u57fa\u7c7b","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u667a\u80fd\u4f53\u6846\u67b6/\u6838\u5fc3/Agent\u62bd\u8c61\u57fa\u7c7b.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5de5\u5177\u6267\u884c\u5668","permalink":"/Blog/docs/\u667a\u80fd\u4f53\u6846\u67b6/\u5de5\u5177/\u5de5\u5177\u6267\u884c\u5668"},"next":{"title":"Message\u7c7b","permalink":"/Blog/docs/\u667a\u80fd\u4f53\u6846\u67b6/\u6838\u5fc3/Message\u7c7b"}}');var t=s(4848),l=s(8453);const i={},d="Agent\u62bd\u8c61\u57fa\u7c7b",c={},o=[{value:"1.\u5bfc\u5165\u90e8\u5206",id:"1\u5bfc\u5165\u90e8\u5206",level:2},{value:"2.\u7c7b\u5b9a\u4e49",id:"2\u7c7b\u5b9a\u4e49",level:2},{value:"3.\u521d\u59cb\u5316\u65b9\u6cd5init",id:"3\u521d\u59cb\u5316\u65b9\u6cd5init",level:2},{value:"4.\u62bd\u8c61\u65b9\u6cd5 run",id:"4\u62bd\u8c61\u65b9\u6cd5-run",level:2},{value:"5.\u6d88\u606f\u5386\u53f2\u7ba1\u7406\u65b9\u6cd5",id:"5\u6d88\u606f\u5386\u53f2\u7ba1\u7406\u65b9\u6cd5",level:2},{value:"6.\u5b57\u7b26\u4e32\u8868\u793a\u65b9\u6cd5",id:"6\u5b57\u7b26\u4e32\u8868\u793a\u65b9\u6cd5",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"agent\u62bd\u8c61\u57fa\u7c7b",children:"Agent\u62bd\u8c61\u57fa\u7c7b"})}),"\n",(0,t.jsx)(n.p,{children:'Agent \u7c7b\u662f\u6574\u4e2a\u6846\u67b6\u7684\u9876\u5c42\u62bd\u8c61\u3002\u5b83\u5b9a\u4e49\u4e86\u4e00\u4e2a\u667a\u80fd\u4f53\u5e94\u8be5\u5177\u5907\u7684\u901a\u7528\u884c\u4e3a\u548c\u5c5e\u6027\uff0c\u4f46\u5e76\u4e0d\u5173\u5fc3\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002\u6211\u4eec\u901a\u8fc7 Python \u7684 abc (Abstract Base Classes) \u6a21\u5757\u6765\u5b9e\u73b0\u5b83\uff0c\u8fd9\u5f3a\u5236\u6240\u6709\u5177\u4f53\u7684\u667a\u80fd\u4f53\u5b9e\u73b0\uff08SimpleAgent, ReActAgent \u7b49\uff09\u90fd\u5fc5\u987b\u9075\u5faa\u540c\u4e00\u4e2a"\u63a5\u53e3"\u3002'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'"""Agent\u57fa\u7c7b"""\n\nfrom abc import ABC, abstractmethod\nfrom typing import Optional\nfrom .message import Message\nfrom .llm import HelloAgentsLLM\nfrom .config import Config\n\nclass Agent(ABC):\n    """Agent\u57fa\u7c7b"""\n    \n    def __init__(\n        self,\n        name: str,\n        llm: HelloAgentsLLM,\n        system_prompt: Optional[str] = None,\n        config: Optional[Config] = None\n    ):\n        self.name = name\n        self.llm = llm\n        self.system_prompt = system_prompt\n        self.config = config or Config()\n        self._history: list[Message] = []\n    \n    @abstractmethod\n    def run(self, input_text: str, **kwargs) -> str:\n        """\u8fd0\u884cAgent"""\n        pass\n    \n    def add_message(self, message: Message):\n        """\u6dfb\u52a0\u6d88\u606f\u5230\u5386\u53f2\u8bb0\u5f55"""\n        self._history.append(message)\n    \n    def clear_history(self):\n        """\u6e05\u7a7a\u5386\u53f2\u8bb0\u5f55"""\n        self._history.clear()\n    \n    def get_history(self) -> list[Message]:\n        """\u83b7\u53d6\u5386\u53f2\u8bb0\u5f55"""\n        return self._history.copy()\n    \n    def __str__(self) -> str:\n        return f"Agent(name={self.name}, provider={self.llm.provider})"\n    \n    def __repr__(self) -> str:\n        return self.__str__()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"1\u5bfc\u5165\u90e8\u5206",children:"1.\u5bfc\u5165\u90e8\u5206"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from abc import ABC, abstractmethod\nfrom typing import Optional\nfrom .message import Message\nfrom .llm import HelloAgentsLLM\nfrom .config import Config\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u5bfc\u5165\u9879"}),(0,t.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ABC"}),(0,t.jsx)(n.td,{children:"\u62bd\u8c61\u57fa\u7c7b\uff08Abstract Base Class\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"abstractmethod"}),(0,t.jsx)(n.td,{children:"\u88c5\u9970\u5668\uff0c\u7528\u4e8e\u5b9a\u4e49\u62bd\u8c61\u65b9\u6cd5"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Message"}),(0,t.jsx)(n.td,{children:"\u6d88\u606f\u7c7b"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"HelloAgentsLLM"}),(0,t.jsx)(n.td,{children:"LLM\uff08\u5927\u8bed\u8a00\u6a21\u578b\uff09\u63a5\u53e3"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Config"}),(0,t.jsx)(n.td,{children:"\u914d\u7f6e\u7c7b"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"2\u7c7b\u5b9a\u4e49",children:"2.\u7c7b\u5b9a\u4e49"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'class Agent(ABC):\n    """Agent\u57fa\u7c7b"""\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Agent \u662f\u4e00\u4e2a\u62bd\u8c61\u57fa\u7c7b\uff08\u7ee7\u627f ABC\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u62bd\u8c61\u57fa\u7c7b\u662f\u4e0d\u80fd\u76f4\u63a5\u5b9e\u4f8b\u5316\u7684\uff0c\u5fc5\u987b\u88ab\u7ee7\u627f\u624d\u80fd\u4f7f\u7528"}),"\n",(0,t.jsx)(n.li,{children:"\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u4fdd\u8bc1\u6240\u6709Agent\u5b50\u7c7b\u90fd\u9075\u5faa\u540c\u6837\u7684\u7ed3\u6784"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"3\u521d\u59cb\u5316\u65b9\u6cd5init",children:"3.\u521d\u59cb\u5316\u65b9\u6cd5init"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def __init__(\n    self,\n    name: str,\n    llm: HelloAgentsLLM,\n    system_prompt: Optional[str] = None,\n    config: Optional[Config] = None\n):\n    self.name = name\n    self.llm = llm\n    self.system_prompt = system_prompt\n    self.config = config or Config()\n    self._history: list[Message] = []\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u53c2\u6570\u8bf4\u660e\uff1a"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u53c2\u6570"}),(0,t.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,t.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"name"}),(0,t.jsx)(n.td,{children:"str"}),(0,t.jsx)(n.td,{children:"Agent\u7684\u540d\u5b57"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"llm"}),(0,t.jsx)(n.td,{children:"HelloAgentsLLM"}),(0,t.jsx)(n.td,{children:"\u4f7f\u7528\u7684LLM\u6a21\u578b"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"system_prompt"}),(0,t.jsx)(n.td,{children:"Optional[str]"}),(0,t.jsx)(n.td,{children:"\u7cfb\u7edf\u63d0\u793a\u8bcd\uff08\u53ef\u9009\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"config"}),(0,t.jsx)(n.td,{children:"Optional[Config]"}),(0,t.jsx)(n.td,{children:"\u914d\u7f6e\u5bf9\u8c61\uff08\u53ef\u9009\uff09"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u5c5e\u6027\u8bf4\u660e\uff1a"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u5c5e\u6027"}),(0,t.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"self.name"}),(0,t.jsx)(n.td,{children:"Agent\u540d\u5b57"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"self.llm"}),(0,t.jsx)(n.td,{children:"LLM\u5bf9\u8c61\uff0c\u7528\u4e8e\u751f\u6210\u56de\u590d"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"self.system_prompt"}),(0,t.jsx)(n.td,{children:"\u7cfb\u7edf\u63d0\u793a\u8bcd\uff08\u5b9a\u4e49Agent\u7684\u89d2\u8272/\u884c\u4e3a\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"self.config"}),(0,t.jsx)(n.td,{children:"\u914d\u7f6e\u5bf9\u8c61\uff08\u5982\u679c\u6ca1\u4f20\u5165\u5c31\u7528\u9ed8\u8ba4Config\uff09"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"self._history"}),(0,t.jsx)(n.td,{children:"\u5bf9\u8bdd\u5386\u53f2\u8bb0\u5f55\u5217\u8868\uff08\u4e0b\u5212\u7ebf\u8868\u793a\u79c1\u6709\u5c5e\u6027\uff09"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u7279\u6b8a\u8bed\u6cd5\uff1a"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"self.config = config or Config()\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5982\u679c config \u4e3a None\uff0c\u5c31\u4f7f\u7528 Config()"}),"\n",(0,t.jsx)(n.li,{children:"\u8fd9\u4fdd\u8bc1\u4e86 self.config \u6c38\u8fdc\u4e0d\u4f1a\u662f None"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"4\u62bd\u8c61\u65b9\u6cd5-run",children:"4.\u62bd\u8c61\u65b9\u6cd5 run"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'@abstractmethod\ndef run(self, input_text: str, **kwargs) -> str:\n    """\u8fd0\u884cAgent"""\n    pass\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@abstractmethod"}),"\uff1a\u88c5\u9970\u5668\uff0c\u8868\u793a\u8fd9\u662f\u62bd\u8c61\u65b9\u6cd5"]}),"\n",(0,t.jsx)(n.li,{children:"\u62bd\u8c61\u65b9\u6cd5\u5fc5\u987b\u5728\u5b50\u7c7b\u4e2d\u5b9e\u73b0"}),"\n",(0,t.jsx)(n.li,{children:"\u5b50\u7c7b\u4e0d\u5b9e\u73b0 run \u65b9\u6cd5\u5c31\u65e0\u6cd5\u521b\u5efa\u5b9e\u4f8b"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u793a\u4f8b\uff08\u5b50\u7c7b\u5fc5\u987b\u8fd9\u6837\u5b9e\u73b0\uff09\uff1a"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class MyAgent(Agent):\n    def run(self, input_text: str, **kwargs) -> str:\n        # \u8c03\u7528LLM\u5904\u7406\u8f93\u5165\n        result = self.llm.generate(input_text)\n        return result\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"5\u6d88\u606f\u5386\u53f2\u7ba1\u7406\u65b9\u6cd5",children:"5.\u6d88\u606f\u5386\u53f2\u7ba1\u7406\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1. add_message - \u6dfb\u52a0\u6d88\u606f"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def add_message(self, message: Message):\n    """\u6dfb\u52a0\u6d88\u606f\u5230\u5386\u53f2\u8bb0\u5f55"""\n    self._history.append(message)\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u628a\u6d88\u606f\u8ffd\u52a0\u5230\u5386\u53f2\u5217\u8868\u672b\u5c3e"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2. clear_history - \u6e05\u7a7a\u5386\u53f2"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def clear_history(self):\n    """\u6e05\u7a7a\u5386\u53f2\u8bb0\u5f55"""\n    self._history.clear()\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5220\u9664\u6240\u6709\u5386\u53f2\u6d88\u606f"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3. get_history - \u83b7\u53d6\u5386\u53f2"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def get_history(self) -> list[Message]:\n    """\u83b7\u53d6\u5386\u53f2\u8bb0\u5f55"""\n    return self._history.copy()\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u8fd4\u56de\u5386\u53f2\u5217\u8868\u7684\u526f\u672c\uff08\u4e0d\u662f\u539f\u5217\u8868\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u8fd9\u6837\u7528\u6237\u4fee\u6539\u526f\u672c\u4e0d\u4f1a\u5f71\u54cd\u539f\u59cb\u5386\u53f2"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"6\u5b57\u7b26\u4e32\u8868\u793a\u65b9\u6cd5",children:"6.\u5b57\u7b26\u4e32\u8868\u793a\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def __str__(self) -> str:\n    return f"Agent(name={self.name}, provider={self.llm.provider})"\n\ndef __repr__(self) -> str:\n    return self.__str__()\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u5b9a\u4e49\u4e86Agent\u5bf9\u8c61\u5982\u4f55\u663e\u793a\u4e3a\u5b57\u7b26\u4e32\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'agent = MyAgent(name="\u52a9\u624b", llm=some_llm)\nprint(agent)  # \u8f93\u51fa\uff1aAgent(name=\u52a9\u624b, provider=openai)\n'})})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>d});var r=s(6540);const t={},l=r.createContext(t);function i(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);