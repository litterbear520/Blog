"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[5136],{3951:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/1771260582328-23e7d50875a165021a9989f90703fbe4.png"},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var r=n(6540);const o={},a=r.createContext(o);function i(e){const t=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(a.Provider,{value:t},e.children)}},9414:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>m});const r=JSON.parse('{"id":"LangChain/\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5","title":"\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5","description":"\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5","source":"@site/docs/LangChain/\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5.md","sourceDirName":"LangChain","slug":"/LangChain/\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5","permalink":"/Blog/docs/LangChain/\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/LangChain/\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"description":"\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5"},"sidebar":"tutorialSidebar","previous":{"title":"Fewshot \u63d0\u793a\u8bcd\u6a21\u677f","permalink":"/Blog/docs/LangChain/Fewshot\u63d0\u793a\u8bcd\u6a21\u677f"},"next":{"title":"ChatPromptTemplate","permalink":"/Blog/docs/LangChain/ChatPromptTemplate"}}');var o=n(4848),a=n(8453);const i={sidebar_position:11,description:"\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5"},l="\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5",s={},m=[{value:"\u6a21\u677f\u5bf9\u8c61\u7684format\u65b9\u6cd5",id:"\u6a21\u677f\u5bf9\u8c61\u7684format\u65b9\u6cd5",level:2},{value:"\u6a21\u677f\u5bf9\u8c61\u7684invoke\u65b9\u6cd5",id:"\u6a21\u677f\u5bf9\u8c61\u7684invoke\u65b9\u6cd5",level:2},{value:"format\u548cinvoke\u7684\u533a\u522b",id:"format\u548cinvoke\u7684\u533a\u522b",level:2},{value:"\u5b9e\u8df5\u4ee3\u7801",id:"\u5b9e\u8df5\u4ee3\u7801",level:2}];function p(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5",children:"\u6a21\u677f\u7c7b\u7684format\u548cinvoke\u65b9\u6cd5"})}),"\n",(0,o.jsx)(t.p,{children:"\u5728PromptTemplate\uff08\u901a\u7528\u63d0\u793a\u8bcd\u6a21\u677f\uff09\u548cFewShotPromptTemplate\uff08FewShot\u63d0\u793a\u8bcd\u6a21\u677f\uff09\u7684\u4f7f\u7528\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u5982\u4e0b\uff1a"}),"\n",(0,o.jsx)(t.h2,{id:"\u6a21\u677f\u5bf9\u8c61\u7684format\u65b9\u6cd5",children:"\u6a21\u677f\u5bf9\u8c61\u7684format\u65b9\u6cd5"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:'prompt_template = PromptTemplate.from_template(\n    "\u6211\u7684\u90bb\u5c45\u59d3{lastname}\uff0c\u521a\u751f\u4e86{gender}\uff0c\u4f60\u5e2e\u6211\u8d77\u4e2a\u540d\u5b57\uff0c\u7b80\u5355\u56de\u7b54\u3002"\n)\n# \u8c03\u7528.format\u65b9\u6cd5\u6ce8\u5165\u4fe1\u606f\u5373\u53ef\nprompt_text = prompt_template.format(lastname="\u5f20", gender="\u5973\u513f")\n\nmodel = Tongyi(model="qwen-max")\nres = model.invoke(input=prompt_text)\nprint(res)\n'})}),"\n",(0,o.jsx)(t.h2,{id:"\u6a21\u677f\u5bf9\u8c61\u7684invoke\u65b9\u6cd5",children:"\u6a21\u677f\u5bf9\u8c61\u7684invoke\u65b9\u6cd5"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:'few_shot_template = FewShotPromptTemplate(\n    example_prompt=example_template,      # \u793a\u4f8b\u6570\u636e\u7684\u6a21\u677f\n    examples=examples_data,               # \u793a\u4f8b\u7684\u6570\u636e\uff08\u7528\u6765\u6ce8\u5165\u52a8\u6001\u6570\u636e\u7684\uff09\uff0clist\u5185\u5957dict\n    prefix="\u544a\u77e5\u6211\u5355\u8bcd\u7684\u53cd\u4e49\u8bcd\uff0c\u6211\u63d0\u4f9b\u5982\u4e0b\u7684\u793a\u4f8b\uff1a",          # \u793a\u4f8b\u4e4b\u524d\u7684\u63d0\u793a\n    suffix="\u57fa\u4e8e\u524d\u9762\u7684\u793a\u4f8b\u544a\u77e5\u6211\uff0c{input_word}\u7684\u53cd\u4e49\u8bcd\u662f\uff1f", # \u793a\u4f8b\u4e4b\u540e\u7684\u63d0\u793a\n    input_variables=[\'input_word\']        # \u58f0\u660e\u5728\u524d\u7f00\u6216\u540e\u7f00\u4e2d\u6240\u9700\u8981\u6ce8\u5165\u7684\u53d8\u91cf\u540d\n)\n\nprompt_text = few_shot_template.invoke(input={"input_word": "\u5de6"}).to_string()\nprint(prompt_text)\n'})}),"\n",(0,o.jsx)(t.p,{children:"PromptTemplate\u3001FewShotPromptTemplate\u3001ChatPromptTemplate\uff08\u540e\u7eed\u5b66\u4e60\uff09\u90fd\u62e5\u6709format\u548cinvoke\u8fd92\u7c7b\u65b9\u6cd5\u3002"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"1771260582328",src:n(3951).A+"",width:"1059",height:"418"})}),"\n",(0,o.jsx)(t.h2,{id:"format\u548cinvoke\u7684\u533a\u522b",children:"format\u548cinvoke\u7684\u533a\u522b"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"\u533a\u522b"}),(0,o.jsx)(t.th,{children:"format"}),(0,o.jsx)(t.th,{children:"invoke"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"\u529f\u80fd"}),(0,o.jsx)(t.td,{children:"\u7eaf\u5b57\u7b26\u4e32\u66ff\u6362\uff0c\u89e3\u6790\u5360\u4f4d\u7b26\u751f\u6210\u63d0\u793a\u8bcd"}),(0,o.jsx)(t.td,{children:"Runnable \u63a5\u53e3\u6807\u51c6\u65b9\u6cd5\uff0c\u89e3\u6790\u5360\u4f4d\u7b26\u751f\u6210\u63d0\u793a\u8bcd"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"\u8fd4\u56de\u503c"}),(0,o.jsx)(t.td,{children:"\u5b57\u7b26\u4e32"}),(0,o.jsx)(t.td,{children:"PromptValue \u7c7b\u5bf9\u8c61"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"\u4f20\u53c2"}),(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:".format(k=v, k=v, ...)"})}),(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:'.invoke({"k":v, "k":v, ...})'})})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"\u89e3\u6790"}),(0,o.jsxs)(t.td,{children:["\u652f\u6301\u89e3\u6790 ",(0,o.jsx)(t.code,{children:"{}"})," \u5360\u4f4d\u7b26"]}),(0,o.jsxs)(t.td,{children:["\u652f\u6301\u89e3\u6790 ",(0,o.jsx)(t.code,{children:"{}"})," \u5360\u4f4d\u7b26\u548c MessagesPlaceholder \u7ed3\u6784\u5316\u5360\u4f4d\u7b26"]})]})]})]}),"\n",(0,o.jsx)(t.h2,{id:"\u5b9e\u8df5\u4ee3\u7801",children:"\u5b9e\u8df5\u4ee3\u7801"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:'from langchain_core.prompts import PromptTemplate\nfrom langchain_core.prompts import FewShotPromptTemplate\nfrom langchain_core.prompts import ChatPromptTemplate\n\n"""\nPromptTemplate -> StringPromptTemplate -> BasePromptTemplate -> RunnableSerializable -> Runnable\nFewShotPromptTemplate -> StringPromptTemplate -> BasePromptTemplate -> RunnableSerializable -> Runnable\nChatPromptTemplate -> BaseChatPromptTemplate -> BasePromptTemplate -> RunnableSerializable -> Runnable\n"""\n\ntemplate = PromptTemplate.from_template("\u6211\u7684\u90bb\u5c45\u662f: {lastname}, \u6700\u559c\u6b22: {hobby}")\n\nres = template.format(lastname="\u5f20\u5927\u660e", hobby="\u9493\u9c7c")\nprint(res, type(res))\n\nres2 = template.invoke({"lastname": "\u5468\u6770\u4f26", "hobby": "\u5531\u6b4c"})\nprint(res2, type(res2))\n'})})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}}}]);